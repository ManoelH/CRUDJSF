<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>Gerenciar usuários</title>
	<link rel="StyleSheet" type="text/css" href="css/styleIndex.css" />
</h:head>
<f:metadata>
	<f:viewAction action="#{userMB.listarUsers}" />
</f:metadata>
<h:body>
	<div id="page">
		<div id="ui-header">
			
				<p:row style="padding:0px;">
					<p:column>
						<ui:insert name="header">
							<ui:include src="../template/header.xhtml"/>
						</ui:insert>
					</p:column>
				</p:row>
			
		</div>
		
		<div id="ui-content">
			<h:form id="form-list">
				<p:growl/>
				<p:panel id="panelL">
				<h3 style="margin-left: 47%">Usuários</h3>
					<p:dataTable var="user" value="#{userMB.users}" rows="10"
						paginator="true" emptyMessage="Não há usuários ativos" 
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15">

						<p:column headerText="Nome">
							<h:outputText value="#{user.nome}" />
						</p:column>

						<p:column headerText="Email">
							<h:outputText value="#{user.email}" />
						</p:column>

						<p:column headerText="CPF">
							<h:outputText value="#{user.cpf}" />
						</p:column>
						
						<p:column headerText="Celular">
							<h:outputText value="#{user.celular}" />
						</p:column>
						
						<p:column headerText="Genero">
							<h:outputText value="#{user.genero}" />
						</p:column>
						
						<p:column headerText="Ações">
							<p:commandButton value="Editar" action="#{userMB.selecionarUsuario(user)}"/>
							<p:commandButton value="Excluir" action="#{userMB.selecionarUsuarioExc(user)}"/>
						</p:column>
					</p:dataTable>
				</p:panel>
			</h:form>
			
			<p:dialog header="Editar usuário" modal="true" widgetVar="dialog-edit" width="500" minHeight="40">
				<h:form id="form-editar">
					<p:panel id="panelE">
						<p:row>
							<p:outputLabel value="Nome" />
							<br />
							<p:inputText value="#{userMB.user.nome}" style="width: 98%;" />
							<br />
							<p:outputLabel value="Email" />
							<br />
							<p:inputText value="#{userMB.user.email}" type="email"
								style="width: 98%;" />
							<br />
							<p:outputLabel value="CPF" />
							<br />
							<p:inputMask value="#{userMB.user.cpf}" style="width: 98%;"
								mask="999.999.999-99" />
							<br />
							<p:outputLabel value="Celular" />
							<br />
							<p:inputMask value="#{userMB.user.celular}" style="width: 98%;"
								mask="(99) 99999-9999" />
							<br />
							<p:outputLabel value="Genero" />
							<br />
							<p:selectOneMenu id="genero" value="#{userMB.user.genero}"
								style="width:125px">
								<f:selectItem itemLabel="Masculino" itemValue="M" />
								<f:selectItem itemLabel="Feminino" itemValue="F" />
							</p:selectOneMenu>

							<p:fileUpload mode="advanced" skinSimple="true" />
							<br />
							<br />
							<p:commandButton value="Editar" action="#{userMB.editarUsuario}" style="margin-left:40%;"/>
						</p:row>
					</p:panel>
				</h:form>
			</p:dialog>
			
				<p:dialog header="Excluir usuário" modal="true" widgetVar="dialog-exc" width="500" minHeight="40">
				<h:form id="form-excluir">
					<p:panel id="panelEx">
						<p:row>
							<h3>Você tem certeza que deseja excluir o usuário 
								<h:outputText value="#{userMB.user.nome} " style="font-weight:bolder"/>?
							</h3>
							<p:commandButton value="Excluir" action="#{userMB.excluirUsuario}" style="margin-left:40%;"/>
							<p:commandButton value="Cancelar" ajax="true" onclick="PF('dialog-exc').hide();" style="margin-left:40%;"/>
						</p:row>
					</p:panel>
				</h:form>
			</p:dialog>
		</div>
	</div>
	
</h:body>
</html>